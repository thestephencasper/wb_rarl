#!/usr/bin/env bash

################################################################################################
############################ HYPERPARAM SWEEP ################################################
# Uncomment these experiments to run the hyperparameter search. If all you want is to run the seed sweep
# look at the section below

# 0 adv grid search
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 0 --advs_per_strength 0 --advs_per_rew 0 --num_adv_rews 0 --use_s3 --env_name cheetah --exp_title hc_0adv_concat1_grid --num_cpus 10 --run_transfer_tests --multi_node --grid_search --adv_all_actions --concat_actions " --start --stop --tmux --cluster-name=yd_hc_test1
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/visualize/mujoco/cluster_transfer_tests.py hc_0adv_concat1_grid 700 05-17-2020" --start --stop --tmux --cluster-name=yd_hc_ttest1
#Seed Sweep
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 0 --advs_per_strength 0 --advs_per_rew 0 --num_adv_rews 0 --use_s3 --env_name cheetah --exp_title hc_0adv_concat1_seed_good --num_cpus 10 --run_transfer_tests --multi_node --adv_all_actions --concat_actions --seed_search --adv_all_actions --concat_actions --lambda_val 0.95 --lr .0005" --start --stop --tmux --cluster-name=yd_hc_stest1
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 0 --advs_per_strength 0 --advs_per_rew 0 --num_adv_rews 0 --use_s3 --env_name cheetah --exp_title hc_0adv_concat1_seed_bad --num_cpus 10 --run_transfer_tests --multi_node --adv_all_actions --concat_actions --seed_search --adv_all_actions --concat_actions --lambda_val 0.95 --lr .0005" --start --stop --tmux --cluster-name=yd_hc_sstest1



# 1 adv grid search
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 1 --advs_per_strength 1 --advs_per_rew 1 --num_adv_rews 1 --use_s3 --env_name cheetah --exp_title hc_1adv_concat1_grid_str0p1 --num_cpus 10 --run_transfer_tests --multi_node --adv_strength 0.1 --grid_search --adv_all_actions --concat_actions" --start --stop --tmux --cluster-name=yd_hc_test2
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 1 --advs_per_strength 1 --advs_per_rew 1 --num_adv_rews 1 --use_s3 --env_name cheetah --exp_title hc_1adv_concat1_grid_str0p5 --num_cpus 10 --run_transfer_tests --multi_node --adv_strength 0.5 --grid_search --adv_all_actions --concat_actions" --start --stop --tmux --cluster-name=yd_hc_test3
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/visualize/mujoco/cluster_transfer_tests.py hc_1adv_concat1_grid_str0p25 700 05-17-2020" --start --stop --tmux --cluster-name=yd_hc_ttest2
#Seed Sweep
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 1 --advs_per_strength 1 --advs_per_rew 1 --num_adv_rews 1 --use_s3 --env_name cheetah --exp_title hc_1adv_concat1_seed_str0p1_good --num_cpus 10 --run_transfer_tests --multi_node --adv_strength 0.1 --adv_all_actions --concat_actions --seed_search --lambda_val 0.9 --lr .0005" --start --stop --tmux --cluster-name=yd_hc_stest2
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 1 --advs_per_strength 1 --advs_per_rew 1 --num_adv_rews 1 --use_s3 --env_name cheetah --exp_title hc_1adv_concat1_seed_str0p1_bad --num_cpus 10 --run_transfer_tests --multi_node --adv_strength 0.1 --adv_all_actions --concat_actions --seed_search --lambda_val 0.95 --lr .0003" --start --stop --tmux --cluster-name=yd_hc_sstest2

# 3 adv grid search w/ no reward ranges
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 1 --advs_per_strength 3 --advs_per_rew 1 --num_adv_rews 3 --use_s3 --env_name cheetah --exp_title hc_3adv_concat1_grid_str0p1_norew_bad --num_cpus 10 --run_transfer_tests --multi_node --adv_strength 0.1 --grid_search --adv_all_actions --concat_actions" --start --stop --tmux --cluster-name=yd_hc_test6
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/visualize/mujoco/cluster_transfer_tests.py hc_5adv_concat1_grid_str0p25_norew 700 05-17-2020" --start --stop --tmux --cluster-name=yd_hc_ttest3
#Seed Sweep
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 1 --advs_per_strength 3 --advs_per_rew 1 --num_adv_rews 3 --use_s3 --env_name cheetah --exp_title hc_3adv_concat1_seed_str0p1_norew_good --num_cpus 10 --run_transfer_tests --multi_node --adv_strength 0.1 --adv_all_actions --concat_actions --seed_search --lambda_val 0.9 --lr .0003" --start --stop --tmux --cluster-name=yd_hc_stest6_g
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 1 --advs_per_strength 3 --advs_per_rew 1 --num_adv_rews 3 --use_s3 --env_name cheetah --exp_title hc_3adv_concat1_seed_str0p1_norew_bad --num_cpus 10 --run_transfer_tests --multi_node --adv_strength 0.1 --adv_all_actions --concat_actions --seed_search --lambda_val 0.9 --lr .0003" --start --stop --tmux --cluster-name=yd_hc_stest6_b


# 5 adv grid search w/ no reward ranges
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 1 --advs_per_strength 5 --advs_per_rew 1 --num_adv_rews 5 --use_s3 --env_name cheetah --exp_title hc_5adv_concat1_grid_str0p1_norew --num_cpus 10 --run_transfer_tests --multi_node --adv_strength 0.1 --grid_search --adv_all_actions --concat_actions" --start --stop --tmux --cluster-name=yd_hc_test6
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 1 --advs_per_strength 5 --advs_per_rew 1 --num_adv_rews 5 --use_s3 --env_name cheetah --exp_title hc_5adv_concat1_grid_str0p5_norew --num_cpus 10 --run_transfer_tests --multi_node --adv_strength 0.5 --grid_search --adv_all_actions --concat_actions" --start --stop --tmux --cluster-name=yd_hc_test7
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/visualize/mujoco/cluster_transfer_tests.py hc_5adv_concat1_grid_str0p25_norew 700 05-17-2020" --start --stop --tmux --cluster-name=yd_hc_ttest3
#Seed Sweep
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 1 --advs_per_strength 5 --advs_per_rew 1 --num_adv_rews 5 --use_s3 --env_name cheetah --exp_title hc_5adv_concat1_seed_str0p1_norew_good --num_cpus 10 --run_transfer_tests --multi_node --adv_strength 0.1 --adv_all_actions --concat_actions --seed_search --lambda_val 0.9 --lr .0003" --start --stop --tmux --cluster-name=yd_hc_stest6
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 1 --advs_per_strength 5 --advs_per_rew 1 --num_adv_rews 5 --use_s3 --env_name cheetah --exp_title hc_5adv_concat1_seed_str0p1_norew_bad --num_cpus 10 --run_transfer_tests --multi_node --adv_strength 0.1 --adv_all_actions --concat_actions --seed_search --lambda_val 0.9 --lr .0005" --start --stop --tmux --cluster-name=yd_hc_sstest6


# Domain randomization experiment w/ grid search
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 0 --advs_per_strength 0 --advs_per_rew 0 --num_adv_rews 0 --use_s3 --env_name cheetah --exp_title hc_0adv_concat1_grid_dr --num_cpus 10 --run_transfer_tests --multi_node --grid_search --domain_randomization --adv_all_actions --concat_actions" --start --stop --tmux --cluster-name=yd_hc_test9
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/visualize/mujoco/cluster_transfer_tests.py hc_0adv_concat1_grid_dr 700 05-17-2020" --start --stop --tmux --cluster-name=yd_hc_ttest4
#Seed Sweep
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 0 --advs_per_strength 0 --advs_per_rew 0 --num_adv_rews 0 --use_s3 --env_name cheetah --exp_title hc_0adv_concat1_seed_dr_good --num_cpus 10 --run_transfer_tests --multi_node --domain_randomization --adv_all_actions --concat_actions --seed_search --lambda_val 0.9 --lr .0005" --start --stop --tmux --cluster-name=yd_hc_stest9
ray exec autoscale.yaml "python /home/ubuntu/adversarial_sim2real/run_scripts/mujoco/run_adv_mujoco.py --train_batch_size 100000 --num_iters 700 --checkpoint_freq 100 --num_concat_states 1 --num_adv_strengths 0 --advs_per_strength 0 --advs_per_rew 0 --num_adv_rews 0 --use_s3 --env_name cheetah --exp_title hc_0adv_concat1_seed_dr_bad --num_cpus 10 --run_transfer_tests --multi_node --domain_randomization --adv_all_actions --concat_actions --seed_search --lambda_val 1 --lr .0003" --start --stop --tmux --cluster-name=yd_hc_sstest9

